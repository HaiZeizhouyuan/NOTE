



网络应用程序的体系结构

p2p结构:





HTTP常见状态码

1. 下面常见的http状态码：

   100：这个状态码是告诉客户端应该继续发送请求，这个临时响应是用来通知客户端的，部分的请求服务器已经接受，但是客户端应继续发送求请求的剩余部分，如果请求已经完成，就忽略这个响应，而且服务器会在请求完成后向客户发送一个最终的结果

2. 

   200：这个是最常见的http状态码，表示服务器已经成功接受请求，并将返回客户端所请求的最终结果

3. 

   202：表示服务器已经接受了请求，但是还没有处理，而且这个请求最终会不会处理还不确定

4. 

   204：服务器成功处理了请求，但没有返回任何实体内容 ，可能会返回新的头部元信息

5. 

   301：客户端请求的网页已经永久移动到新的位置，当链接发生变化时，返回301代码告诉客户端链接的变化，客户端保存新的链接，并向新的链接发出请求,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  已返回请求结果

6. 

   404：请求失败，客户端请求的资源没有找到或者是不存在

7. 

   500：服务器遇到未知的错误，导致无法完成客户端当前的请求。

8. 

   503：服务器由于临时的服务器过载或者是维护，无法解决当前的请求，以上http状态码是服务器经常返回的状态代码，用户只能通过浏览器的状态了解服务器是否正常运行，一般除了错误的状态码，都不会看到服务器的状态码的.



#用户与服务器的交互--COOKIE

## FTP协议

**文件传输协议FTP**





# 运输层

端到端(房间 对房间)



运输层协议概述

TCP :  传输控制协议面向链接, 可靠的数据传输协议

UDP: 用户数据协议无连接, 不可靠的数据传输协议(可校验, 可交付)

IP: 尽力而为交付服务\



多路复用与多路分解

源端口号



## 为什么会选择无连接传输:UDP(对时间敏感)

1.关于何时,发送什么数据的应用层控制更为精细

2.无需建立链接

3.无状态链接

4.分组开销小



UDP报文段结构

校验和





# TCP

三次握手

四次挥手:FIN, ACK, FIN, ACK;



# 网络层

转发

路由器

# 运输层

路由选择协议

IP地址

３２位，　点分十进制



#　链路层提供的服务

１．





# 计算机网络

## １．请你说一下TCP怎么保证可靠性, 并且简述TCP建立链接和断开链接的过程

### TCP保证可靠性：

（１）序列号，确认回答，超时重传

　　数据到达接收方，　接收方需要发出一个确认应答，　表示已经收到该数据段，并且 $\color{red}{确认序号}$ 会说明 它下一次需要接受的$\color{blue}{数据序列号}$．　如果发送方迟迟未收到$\color{red}{确认应答}$，　那么可能是发送的数据丢失，　也可能是确认应答丢失，这时发送方在等待一段时间后会$\color{red}{重新传输}$．这个时间一般是$\color{blue}{２*RTT(报文段往返时间) +一个偏差值}$．

 （２）窗口控制与高速重发控制/快速重传（重复确认应答）

　　TCP会利用$\color{red}{窗口控制}$来提高传输速度，　意思是在一个窗口大小内，　不用一定要要等到应答才能发送下一段数据，　$\color{blue}{窗口大小}$就是无需等待确认而可以继续发送数据的最大值．$\color{red}{如果}$不使用窗口控制，　每一个没收到确认应答的数据都需要重发．

　　使用窗口控制，　如果数据段１００１～２０００丢失，　后面数据每次传输，　接收端都会不停地发送序号为１００１的应答，　表示我要接受１００１开始的数据，　发送端如果收到３次相同的应答，　就会立刻进行重发；但还有种情况有可能是数据收到了，　但是有的确认应答丢失时了，　这种情况不会进行重发，　因为发送端知道，如果是数据丢失，　接受端不会放过它，　会疯狂向它提醒．．．．．

（３）拥塞控制

​	如果把窗口定的很大，　发送端连续发送大量的数据，　可能会造成网络的拥塞，　甚至造成网络的瘫痪．所以TCP在为了防止这种情况而进行了$\color{red}{拥塞控制}$．

​	慢启动  : 定义拥塞窗口，一开始将该窗口大小设置为１，　之后每次收到确认应答（经过一个rit），　将拥塞窗口大小 *２；

 	拥塞控制：设置慢启动的阈值，　一般开始设置为65536．$\color{red}{拥塞避免}$是指当拥塞窗口大小达到这个阈值，　拥塞窗口的大小不在指数上升，　而是加法增加（每次确认应答/每个rit，　拥塞窗口大小＋１），　以此来避免拥塞.

​	将报文段的超时重传看做拥塞，　则一但发生超时重传，我们先将阈值大小设为当前窗口大小的一半，　并将窗口大小设为初始值１，　然后重新进入慢启动过程．

 	快速重传:在遇见3次重复确认应答(高速重发控制)时, 代表收到了3个报文段,但是这之前的一个段丢失了, 便对它进行立即重传.

​	然后, 先将阈值设为当前窗口大小的一半, 然后将拥塞窗口大小设为慢启动阈值+3的大小

​	这样就可以达到:在TCP通信时,网络吞吐量呈现逐渐的上升, 并且随着拥塞阻塞来降低吞吐量, 再进入慢慢上升的过程, 网络不会轻易的发生瘫痪.

### TCP建立连接和断开连接的过程(三次握手和四次挥手)

​	三次握手:

​	 1.Client将标志位$\color{red}{SYN}$置为1, 随机产生一个值$\color{red}{seq = J}$, 并将该数据包发给Server, Client进入SYN_SENT状态, 等待Server 确认.

 	2.Server收到数据包后有标志位SYN=1 知道Client  请求建立连接, Server 将标志位$\color{red}{SYN和ACK}$都置为1,         $\color{red}{ack = J + 1}$, 随机产生一个值$\color{red}{seq = K}$, 并将该数据包发送给Client以确认连接请求, Server进入SYN_RCVD状态.

​	3.Client收到确认后, 检查$\color{red}{ack}$是否为J + 1, $\color{red}{ACK}$是否为1, 如果正确则将标志位$\color{red}{ACK}$置为1, $\color{red}{ack=K+1}$, 并将该数据包发送给Server, Server检查$\color{red}{ack}$是否为K + 1, $\color{red}{ACK}$是否为1,如果正确则连接建立成功, Client和Server进入ESTABLISHED状态, 完成三次握手, 随后 Client与Server 之间可以开始传递数据了.



四次握手:
	由于TCP连接时全双工的, 因此, 每个方向都必须要单独进行关闭,这一原则是当一方完成数据发送任务后, 发送一个FIN来终止这一方向的连接, 收到一个FIN只是意味着这一方向没有数据流动了, 即不会在收到数据了但是在这个TCP连接上仍然能够发送数据，　直到这一方向也发送了FIN．首先进行关闭的一方将执行主动关闭，　而另一方则执行被动关闭．

​	１．数据传输结束后，客户端的应用进程发出连接释放报文段，　并停止发送数据，客户端进入FIN_WAIT_1状态，　此时客户端任然可以接收服务器发送来的数据．

​	２．服务器接收到FIN后，　发送一个ACK给客户端，　确认序号为收到的序号＋１，服务器进入CLOSE_WAIT状态，．客户端收到后进入FIN_WAIT_2状态．

​	３．当服务器没有数据要发送时，　服务器发送一个FIN 报文，　此时服务器进入LAST_ACK状态，等待客户端的确认．

​	４．客户端收到服务器的FIN 报文后，　给服务器发送一个ACK报文，　确认序列号为收到的序列号＋１，．此时客户端进入TIME_WAIT状态，　等待2MSL.（MSL：报文段组＝最大生存时间），　然后关闭连接．



## 2.请回答一下HTTP和HTTPS的区别，以及HTTPS有什么优缺点？

HTTP协议和HTTPS协议区别如下：（安全性，　握手，证书，　端口）

​	（１）HTTP协议是以明文的方式在网络中传输数据，而HTTPS协议传输的数据则是经过TLS 加密后的，　HTTPS具有更高的$\color{red}{安全性}$；

​	（２）HTTPS在TCP三次握手阶段之后，还需要进行SSL的handshake, 协商加密使用的$\color{red}{对称加密密钥}$．

​	（３）HTTPS协议需要服务端申请$\color{red}{证书}$，浏览器端安装对应的$\color{red}{根证书}$

​	（４）HTTP协议的$\color{red}{端口}$是80，　浏览器协议的端口是443

HTTPS优点：（安全, 准确）

HTTPS传输数据过程中使密钥进行加密，　所以安全性更高

HTPPs协议可以认证用户和服务器，　确保数据发送到正确的用户和服务器

HTTPS的缺点：（成本高，　延时长）

​           HTTPS握手阶段延时较高，　由于在进行HTTP会话之前还需进行SSL握手，　因此HTTPS协议握手阶段延时增加．

​	 HTTPS部署成本高，　一方面HTTPS协议需要证书来验证自身的安全性，　所以需要购买CA证书；另一方面由于采用HTTPS协议需要进行加密解密的计算，　占用的CPU资源较多，　需要的服务器配置或数目高．

## 3.　请你说一下HTTP返回码

HTTP协议的响应报文由状态行，响应头部和响应包体组成，　其响应状态码总体描述如下：

１xx :指示信息－－表示请求已接收，　继续处理．

2xx：成功－－表示请求已被成功接收，　理解，　接受．

3xx：重定向－－要完成请求必须进行更进一步的操作　

4xx:　客户端错误－－请求有语法错误或请求无法实现

5xx：服务器端错误－－服务器未能实现合法的请求．

常见状态代码，状态描述的详细说明如下：

200　OK:　客户端请求成功．

206 　partial content : 服务器已经正确处理部分GET 请求，实现$\color{red}{断点续传}$或$\color{red}{同时分片下载}$，　该请求必须包含Range请求头来指示客户端期望得到的范围． 

300　multiple choices(可选重定向)：被请求的资源有一系列可供选择的反馈信息，　由浏览器/用户自行选择其中一种．

301 moved permanently(永久重定向)：该资源已被永久移动到新位置, 将来任何对该资源的访问都要使用本响应的若干个URI之一.

302 move temporarilty(临时重定向): 请求的资源现在临时从不同的 URI中获得.

304  not modified: 如果客户端发送一个待条件的GET 请求并且该请求已经被允许, 而文档内容未被改变,则返回304, 该响应不包含包体(即可直接使用缓存).

403 Forbidden: 服务器收到请求, 但拒绝提供服务

t Found: 请求的资源不存在, 举个例子: 输入 了错误的URL.

## 4.请你说一下IP地址作用,以及MAC地址作用

​	MAC地址是一个$\color{red}{硬件地址}$, 用来定义$\color{red}{网络设备}$的位置, 主要由数据链路层负责.而IP地址是IP协议提供的一统一的地址格式, 为互联网的每一个网络和每一台主机分配一个逻辑地址;以此来屏蔽物理地址的差异.

## 5.请你介绍一下操作系统中的中断

​	中断是指CPU对系统发生的某个事件做出的一种反应, CPU暂停正在执行的程序,保存现场后自动去执行相应的处理程序 , 处理完该事件后在返回中断处理处继续执行原来的程序.







